{"remainingRequest":"C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\src\\tsLibs\\auth.ts","dependencies":[{"path":"C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\src\\tsLibs\\auth.ts","mtime":1632505573829},{"path":"C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL25pemFyL09uZURyaXZlL0RvY3VtZW50cy9naXRodWIvVGVkaVByb2plY3QtMS9BbnRvbmlzL3RlZGlwcm9qZWN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuLi9yb3V0ZXIvaW5kZXgiOwpleHBvcnQgdmFyIGxvZ2luID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShlbWFpbCwgcGFzcykgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCJodHRwczovL2xvY2FsaG9zdDo4MDAwL2xvZ2luIiwgewogICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICAgICAgICBwYXNzd29yZDogcGFzcwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmZsYWcpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgMik7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBpZiAoIXJlc3BvbnNlLmRhdGEudG9rZW4pIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSkpOwoKICAgICAgICAgICAgaWYgKGVtYWlsID09PSAnYWRtaW4nKSB7CiAgICAgICAgICAgICAgcm91dGVyLnB1c2goJy9hZG1pbicpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJvdXRlci5wdXNoKCcvdXNlcicpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCAtMSk7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTQ7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCIqKkxPR0lOIEVSUk9SKioiKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgLTEpOwoKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIC0xKTsKCiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTRdXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gbG9naW4oX3gsIF94MikgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7CmV4cG9ydCB2YXIgbG9nb3V0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7CiAgICAgICAgICAgIHJvdXRlci5wdXNoKCcvJyk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMik7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gbG9nb3V0KCkgewogICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwpleHBvcnQgdmFyIGxvZ2luQ2hlY2sgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICB2YXIgdXNlciwgcmVzcG9uc2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB1c2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKTsKCiAgICAgICAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByb3V0ZXIucHVzaCgnLycpOwogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNTsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCJodHRwczovL2xvY2FsaG9zdDo4MDAwL2NoZWNrIiwgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICdhdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdXNlci50b2tlbgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgdXNlcik7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxMjsKICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDUpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTsKICAgICAgICAgICAgcm91dGVyLnB1c2goJy8nKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KF9jb250ZXh0My50MCkpOwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB1c2VyKTsKCiAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMywgbnVsbCwgW1s1LCAxMl1dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBsb2dpbkNoZWNrKCkgewogICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwpleHBvcnQgdmFyIHVwZGF0ZVVzZXIgPSBmdW5jdGlvbiB1cGRhdGVVc2VyKHVwZGF0ZWQpIHsKICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWQpKTsKICByb3V0ZXIuZ28oMCk7CiAgcmV0dXJuIHVwZGF0ZWQ7Cn07"},{"version":3,"sources":["C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\src\\tsLibs\\auth.ts"],"names":[],"mappings":";;;AAAA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,MAAP,MAAmB,iBAAnB;AAoHA,OAAO,IAAM,KAAK;AAAA,qEAAG,iBAAO,KAAP,EAAsB,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEU,KAAK,CAAC,IAAN,CAAW,8BAAX,EAA2C;AAC9D,cAAA,KAAK,EAAE,KADuD;AAE9D,cAAA,QAAQ,EAAE;AAFoD,aAA3C,CAFV;;AAAA;AAEP,YAAA,QAFO;;AAAA,gBAMT,QAAQ,CAAC,IAAT,CAAc,IANL;AAAA;AAAA;AAAA;;AAAA,6CAOF,CAPE;;AAAA;AAAA,iBASN,QAAQ,CAAC,IAAT,CAAc,KATR;AAAA;AAAA;AAAA;;AAUL,YAAA,YAAY,CAAC,OAAb,CAAqB,MAArB,EAA6B,IAAI,CAAC,SAAL,CAAe,QAAQ,CAAC,IAAxB,CAA7B;;AACA,gBAAG,KAAK,KAAK,OAAb,EAAqB;AACjB,cAAA,MAAM,CAAC,IAAP,CAAY,QAAZ;AACH,aAFD,MAEK;AACD,cAAA,MAAM,CAAC,IAAP,CAAY,OAAZ;AACH;;AAfI,6CAgBE,CAAC,CAhBH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAoBb,YAAA,OAAO,CAAC,GAAR,CAAY,iBAAZ;AApBa,6CAqBN,CAAC,CArBK;;AAAA;AAAA,6CAuBV,CAAC,CAvBS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAL,KAAK;AAAA;AAAA;AAAA,GAAX;AA0BP,OAAO,IAAM,MAAM;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAClB,YAAA,YAAY,CAAC,KAAb;AACA,YAAA,MAAM,CAAC,IAAP,CAAY,GAAZ;;AAFkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAN,MAAM;AAAA;AAAA;AAAA,GAAZ;AAKP,OAAO,IAAM,UAAU;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAChB,YAAA,IADgB,GACT,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,MAArB,CAAX,CADS;;AAAA,gBAElB,IAFkB;AAAA;AAAA;AAAA;;AAGlB,YAAA,MAAM,CAAC,IAAP,CAAY,GAAZ;AAHkB;AAAA;;AAAA;AAAA;AAAA;AAAA,mBAMS,KAAK,CAAC,GAAN,CAAU,8BAAV,EAA0C;AAC7D,cAAA,OAAO,EAAE;AACL,iCAAiB,YAAY,IAAI,CAAC;AAD7B;AADoD,aAA1C,CANT;;AAAA;AAMR,YAAA,QANQ;AAAA,8CAWP,IAXO;;AAAA;AAAA;AAAA;AAad,YAAA,YAAY,CAAC,KAAb;AACA,YAAA,MAAM,CAAC,IAAP,CAAY,GAAZ;AAdc,8CAeP,OAAO,CAAC,MAAR,cAfO;;AAAA;AAAA,8CAkBf,IAlBe;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAV,UAAU;AAAA;AAAA;AAAA,GAAhB;AAqBP,OAAO,IAAM,UAAU,GAAG,SAAb,UAAa,CAAC,OAAD,EAAkC;AACxD,EAAA,YAAY,CAAC,KAAb;AACA,EAAA,YAAY,CAAC,OAAb,CAAqB,MAArB,EAA6B,IAAI,CAAC,SAAL,CAAe,OAAf,CAA7B;AACA,EAAA,MAAM,CAAC,EAAP,CAAU,CAAV;AACA,SAAO,OAAP;AACH,CALM","sourcesContent":["import axios from \"axios\";\r\nimport router from \"../router/index\"\r\n\r\nexport type givenType = {\r\n    flag: Boolean,\r\n    token: String,\r\n    firstname: String,\r\n    lastname: String,\r\n    ProfilePic: String,\r\n    _id: String,\r\n    email: String,\r\n    number: string,\r\n    Education: string,\r\n}\r\n\r\nexport type likeType = {\r\n    _id: String,\r\n    user: String\r\n}\r\n\r\nexport type commentType = {\r\n    user: String,\r\n    text: String,\r\n    name: String,\r\n    avatar: String,\r\n    date: String,\r\n    _id: String,\r\n}\r\n\r\nexport type postType = {\r\n    author: String,\r\n    avatar: String,\r\n    comments: Array<commentType>,\r\n    createdAt: String,\r\n    date: String,\r\n    likes: Array<likeType>,\r\n    name: String,\r\n    pictures: Array<String>,\r\n    text: String,\r\n    updatedAt: String,\r\n    videos: Array<String>,\r\n    voice_recordings: Array<String>,\r\n    __v: Number\r\n    _id: String,\r\n}\r\n\r\nexport type networkUserType = {\r\n    avatar: String,\r\n    id: String,\r\n    name: String,\r\n    professional_position: String,\r\n    Employment_institution: String\r\n}\r\n\r\nexport type notificationRequestType = {\r\n    avatar: String,\r\n    id: String,\r\n    name: String,\r\n}\r\n\r\nexport type notificationNotificationsType = {\r\n    post: String,\r\n    type: String,\r\n    user: String,\r\n    _id: String,\r\n}\r\n\r\nexport type userListType = {\r\n    firstname: String,\r\n    lastname: String,\r\n    _id: String,\r\n    ProfilePic: String,\r\n    number: String,\r\n    email: String,\r\n}\r\n\r\nexport type chatsMessagesType = {\r\n    sender: String,\r\n    text: String,\r\n    avatar: String,\r\n    date: String,\r\n    _id: String,\r\n}\r\n\r\nexport type chatsListType = {\r\n    chaters: Array<String>,\r\n    createdAt: String,\r\n    messages: Array<chatsMessagesType>,\r\n    updatedAt: String,\r\n    __v: Number,\r\n    _id: String,\r\n}\r\n\r\nexport type currType = {\r\n    id: userListType,\r\n    msg_id: String,\r\n    msgs: Array<chatsMessagesType>,\r\n}\r\n\r\nexport type otherProfileType = {\r\n    Education: {private: boolean, string: string},\r\n    ProfilePic: String,\r\n    Skills: {private: boolean, skills: Array<string>},\r\n    Experience: {private: boolean, Experience: Array<string>},\r\n    friends: boolean,\r\n    name: string,\r\n}\r\n\r\nexport type adminUserType = {\r\n    _id: String,\r\n    name: String,\r\n    phoneNumber: String,\r\n    email: String,\r\n    avatar: String,\r\n}\r\n\r\n\r\nexport const login = async (email: string, pass: string): Promise<Number> =>{\r\n    try {\r\n        const response = await axios.post(\"https://localhost:8000/login\", {\r\n            email: email,\r\n            password: pass\r\n        })\r\n        if(!response.data.flag){\r\n            return 2;\r\n        }else{\r\n            if(response.data.token) {\r\n                localStorage.setItem('user', JSON.stringify(response.data));\r\n                if(email === 'admin'){\r\n                    router.push('/admin')\r\n                }else{\r\n                    router.push('/user');\r\n                }\r\n                return -1;\r\n            }\r\n        }\r\n    } catch(errors) {\r\n        console.log(\"**LOGIN ERROR**\");\r\n        return -1;\r\n    }\r\n    return -1;\r\n}\r\n\r\nexport const logout = async () =>{\r\n    localStorage.clear();\r\n    router.push('/');\r\n}\r\n\r\nexport const loginCheck = async (): Promise<givenType> =>{\r\n    const user = JSON.parse(localStorage.getItem('user') as string);\r\n    if(!user){\r\n        router.push('/');\r\n    }else {\r\n        try {\r\n            const response = await axios.get(\"https://localhost:8000/check\", {\r\n                headers: {\r\n                    'authorization': 'Bearer ' + user.token\r\n                }\r\n            })\r\n            return user;\r\n        } catch(errors) {\r\n            localStorage.clear();\r\n            router.push('/');\r\n            return Promise.reject(errors);\r\n        }\r\n    }\r\n    return user;\r\n}\r\n\r\nexport const updateUser = (updated: givenType): givenType =>{\r\n    localStorage.clear();\r\n    localStorage.setItem('user', JSON.stringify(updated));\r\n    router.go(0);\r\n    return updated\r\n}"],"sourceRoot":""}]}