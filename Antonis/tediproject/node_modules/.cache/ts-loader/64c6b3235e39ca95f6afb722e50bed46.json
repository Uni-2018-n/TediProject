{"remainingRequest":"C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\src\\components\\userMainPage\\userPostList.vue?vue&type=script&lang=ts","dependencies":[{"path":"C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\src\\components\\userMainPage\\userPostList.vue","mtime":1630653289138},{"path":"C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1626466876000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9Vc2Vycy9uaXphci9PbmVEcml2ZS9Eb2N1bWVudHMvZ2l0aHViL1RlZGlQcm9qZWN0LTEvQW50b25pcy90ZWRpcHJvamVjdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvbml6YXIvT25lRHJpdmUvRG9jdW1lbnRzL2dpdGh1Yi9UZWRpUHJvamVjdC0xL0FudG9uaXMvdGVkaXByb2plY3Qvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCBvbk1vdW50ZWQsIG9uVW5tb3VudGVkLCByZWYgfSBmcm9tICd2dWUnOwppbXBvcnQgdXNlclBvc3QgZnJvbSAiLi91c2VyUG9zdC52dWUiOwppbXBvcnQgeyBsb2dpbkNoZWNrIH0gZnJvbSAiLi4vLi4vdHNMaWJzL2F1dGgiOwppbXBvcnQgeyBnZXRQb3N0cyB9IGZyb20gIi4uLy4uL3RzTGlicy9wb3N0TG9hZGluZyI7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgbmFtZTogInVzZXJQb3N0TGlzdCIsCiAgY29tcG9uZW50czogewogICAgdXNlclBvc3Q6IHVzZXJQb3N0CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgdXNlciwgcG9zdHMsIGxvYWRNb3JlUG9zdHMsIHNjcm9sbENvbXBvbmVudCwgaGFuZGxlU2Nyb2xsOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCBoYW5kbGVTY3JvbGwpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIG9uVW5tb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJzY3JvbGwiLCBoYW5kbGVTY3JvbGwpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHVzZXIgPSByZWYoKTsKICAgICAgICAgICAgICBwb3N0cyA9IHJlZihbXSk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIGxvZ2luQ2hlY2soKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICB1c2VyLnZhbHVlID0gZGF0YTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBpZiAodXNlci52YWx1ZSkgewogICAgICAgICAgICAgICAgZ2V0UG9zdHModXNlci52YWx1ZS5faWQudG9TdHJpbmcoKSwgMTApLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9wb3N0cyR2YWx1ZTsKCiAgICAgICAgICAgICAgICAgIChfcG9zdHMkdmFsdWUgPSBwb3N0cy52YWx1ZSkucHVzaC5hcHBseShfcG9zdHMkdmFsdWUsIF90b0NvbnN1bWFibGVBcnJheShkYXRhKSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGxvYWRNb3JlUG9zdHMgPSBmdW5jdGlvbiBsb2FkTW9yZVBvc3RzKCkgewogICAgICAgICAgICAgICAgaWYgKHVzZXIudmFsdWUpIGdldFBvc3RzKHVzZXIudmFsdWUuX2lkLnRvU3RyaW5nKCksIDEwKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcG9zdHMkdmFsdWUyOwoKICAgICAgICAgICAgICAgICAgKF9wb3N0cyR2YWx1ZTIgPSBwb3N0cy52YWx1ZSkucHVzaC5hcHBseShfcG9zdHMkdmFsdWUyLCBfdG9Db25zdW1hYmxlQXJyYXkoZGF0YSkpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgc2Nyb2xsQ29tcG9uZW50ID0gcmVmKCk7CgogICAgICAgICAgICAgIGhhbmRsZVNjcm9sbCA9IGZ1bmN0aW9uIGhhbmRsZVNjcm9sbCgpIHsKICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gc2Nyb2xsQ29tcG9uZW50LnZhbHVlOwoKICAgICAgICAgICAgICAgIGlmICgoZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSkgPCB3aW5kb3cuaW5uZXJIZWlnaHQgKyAxKSB7Ly8gbG9hZE1vcmVQb3N0cygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIsCiAgICAgICAgICAgICAgICBwb3N0czogcG9zdHMsCiAgICAgICAgICAgICAgICBzY3JvbGxDb21wb25lbnQ6IHNjcm9sbENvbXBvbmVudAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9Cn0pOw=="},{"version":3,"sources":["C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\nizar\\OneDrive\\Documents\\github\\TediProject-1\\Antonis\\tediproject\\src\\components\\userMainPage\\userPostList.vue?vue&type=script&lang=ts"],"names":[],"mappings":";;;;;AACA,SAAS,eAAT,EAA0B,SAA1B,EAAqC,WAArC,EAAkD,GAAlD,QAA6D,KAA7D;AACA,OAAO,QAAP,MAAqB,gBAArB;AACA,SAAS,UAAT,QAAgD,mBAAhD;AACA,SAAS,QAAT,QAAyB,0BAAzB;AAEA,eAAe,eAAe,CAAC;AAC3B,EAAA,IAAI,EAAE,cADqB;AAE3B,EAAA,UAAU,EAAE;AACR,IAAA,QAAQ,EAAR;AADQ,GAFe;AAKrB,EAAA,KALqB,mBAKhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACP,cAAA,SAAS,CAAC,YAAK;AACX,gBAAA,MAAM,CAAC,gBAAP,CAAwB,QAAxB,EAAkC,YAAlC;AACH,eAFQ,CAAT;AAIA,cAAA,WAAW,CAAC,YAAK;AACb,gBAAA,MAAM,CAAC,mBAAP,CAA2B,QAA3B,EAAqC,YAArC;AACH,eAFU,CAAX;AAGM,cAAA,IARC,GAQM,GAAG,EART;AASD,cAAA,KATC,GASO,GAAG,CAAa,EAAb,CATV;AAAA;AAAA,qBAUD,UAAU,GAAG,IAAb,CAAkB,UAAC,IAAD,EAAoB;AACxC,gBAAA,IAAI,CAAC,KAAL,GAAa,IAAb;AACH,eAFK,CAVC;;AAAA;AAaP,kBAAG,IAAI,CAAC,KAAR,EAAc;AACV,gBAAA,QAAQ,CAAC,IAAI,CAAC,KAAL,CAAW,GAAX,CAAe,QAAf,EAAD,EAA4B,EAA5B,CAAR,CAAwC,IAAxC,CAA6C,UAAA,IAAI,EAAG;AAAA;;AAChD,kCAAA,KAAK,CAAC,KAAN,EAAY,IAAZ,wCAAoB,IAApB;AACH,iBAFD;AAGH;;AAEK,cAAA,aAnBC,GAmBe,SAAhB,aAAgB,GAAK;AACvB,oBAAG,IAAI,CAAC,KAAR,EACA,QAAQ,CAAC,IAAI,CAAC,KAAL,CAAW,GAAX,CAAe,QAAf,EAAD,EAA4B,EAA5B,CAAR,CAAwC,IAAxC,CAA6C,UAAA,IAAI,EAAG;AAAA;;AAChD,mCAAA,KAAK,CAAC,KAAN,EAAY,IAAZ,yCAAoB,IAApB;AACH,iBAFD;AAGH,eAxBM;;AA2BD,cAAA,eA3BC,GA2BiB,GAAG,EA3BpB;;AA8BD,cAAA,YA9BC,GA8Bc,SAAf,YAAe,GAAK;AACtB,oBAAI,OAAO,GAAmB,eAAe,CAAC,KAA9C;;AACA,oBAAG,CAAA,OAAO,SAAP,IAAA,OAAO,WAAP,YAAA,OAAO,CAAE,qBAAT,GAAiC,MAAjC,IAA0C,MAAM,CAAC,WAAP,GAAmB,CAAhE,EAAkE,CAC9D;AACH;AACJ,eAnCM;;AAAA,+CAqCA;AAAE,gBAAA,IAAI,EAAJ,IAAF;AAAQ,gBAAA,KAAK,EAAL,KAAR;AAAe,gBAAA,eAAe,EAAf;AAAf,eArCA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsCV;AA3C0B,CAAD,CAA9B","sourcesContent":["\r\nimport { defineComponent, onMounted, onUnmounted, ref } from 'vue'\r\nimport userPost from \"./userPost.vue\";\r\nimport { loginCheck, givenType, postType } from \"../../tsLibs/auth\"\r\nimport { getPosts } from \"../../tsLibs/postLoading\"\r\n\r\nexport default defineComponent({\r\n    name: \"userPostList\",\r\n    components: {\r\n        userPost,\r\n    },\r\n    async setup() {\r\n        onMounted(() => {\r\n            window.addEventListener(\"scroll\", handleScroll)\r\n        })\r\n\r\n        onUnmounted(() => {\r\n            window.removeEventListener(\"scroll\", handleScroll)\r\n        })\r\n        const user = ref<givenType>();\r\n        const posts = ref<postType[]>([]);\r\n        await loginCheck().then((data: givenType) =>{\r\n            user.value = data;\r\n        })\r\n        if(user.value){\r\n            getPosts(user.value._id.toString(), 10).then(data => {\r\n                posts.value.push(...data);\r\n            });\r\n        }\r\n\r\n        const loadMorePosts = () =>{\r\n            if(user.value)\r\n            getPosts(user.value._id.toString(), 10).then(data => {\r\n                posts.value.push(...data);\r\n            })\r\n        }\r\n\r\n\r\n        const scrollComponent = ref<HTMLDivElement>()\r\n\r\n\r\n        const handleScroll = () => {\r\n            let element: HTMLDivElement = scrollComponent.value as HTMLDivElement;\r\n            if(element?.getBoundingClientRect().bottom < window.innerHeight+1){\r\n                // loadMorePosts();\r\n            }\r\n        }\r\n\r\n        return { user, posts, scrollComponent }\r\n    },\r\n})\r\n"],"sourceRoot":""}]}